(()=>{"use strict";var __webpack_modules__={313:(e,t,a)=>{a.d(t,{J:()=>o});var i=a(223),r=a(26);const s={apiKey:"AIzaSyCDsAJx-JUCuKC1-YR16N7APYpTh--SSLo",authDomain:"videoprompter-d6a18.firebaseapp.com",projectId:"videoprompter-d6a18",storageBucket:"videoprompter-d6a18.firebasestorage.app",messagingSenderId:"43646976330",appId:"1:43646976330:web:6d57b38a3f6c98d4c2c1b3"},o=new class{constructor(){this.db=null,this.prompts=[],this.categories=[],this.unsubscribe=null,this.initialized=!1}async initialize(){if(!this.initialized)try{const e=(0,i.Dk)(),t=0===e.length?(0,i.Wp)(s):e[0];this.db=(0,r.aU)(t),this.initialized=!0;try{await(0,r.enablePersistentCaching)(this.db)}catch(e){console.warn("Firebase persistence failed:",e)}return!0}catch(e){return console.error("Firebase initialization failed:",e),!1}}subscribeToPrompts(e){if(!this.db)return void console.error("Firebase not initialized");const t=(0,r.rJ)(this.db,"prompts"),a=(0,r.P)(t,(0,r.My)("category"),(0,r.My)("order","asc"));this.unsubscribe=(0,r.aQ)(a,t=>{const a=[];t.forEach(e=>{a.push({id:e.id,...e.data()})}),this.prompts=a,e(a),chrome.storage.local.set({cachedPrompts:a,lastSync:Date.now()})},t=>{console.error("Firebase subscription error:",t),this.loadCachedPrompts(e)})}async loadCachedPrompts(e){const t=await chrome.storage.local.get(["cachedPrompts"]);t.cachedPrompts&&(this.prompts=t.cachedPrompts,e(t.cachedPrompts))}async getCategories(){if(!this.db)return[];try{const e=(0,r.rJ)(this.db,"categories"),t=(0,r.P)(e,(0,r.My)("order")),a=await(0,r.GG)(t),i=[];return a.forEach(e=>{i.push({id:e.id,...e.data()})}),i}catch(e){return console.error("Failed to load categories:",e),[{id:"ads",name:"Ads",icon:"📺",description:"Commercial & promotional content"},{id:"storytelling",name:"Storytelling",icon:"📖",description:"Narrative & cinematic content"},{id:"tutorial",name:"Tutorial",icon:"🎓",description:"Educational & how-to content"},{id:"vlogging",name:"Vlogging",icon:"🎥",description:"Personal & lifestyle content"},{id:"street-interview",name:"Street Interview",icon:"🎤",description:"Urban documentary style"},{id:"tech-influencer",name:"Tech Influencer",icon:"💻",description:"Tech reviews & announcements"},{id:"mobile-game",name:"Mobile Game",icon:"🎮",description:"Game advertisements"}]}}unsubscribeFromPrompts(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}async isFirebaseEnabled(){return"YOUR_API_KEY"!==s.apiKey&&"YOUR_PROJECT_ID"!==s.projectId}}},845:(e,t,a)=>{var i=a(848),r=a(540),s=a(338);const o=new class{constructor(){this.initialized=!1,this.EXTENSION_ID="veo-3-prompter",this.init()}async init(){try{const{default:e}=await a.e(121).then(a.bind(a,32));this.extpay=e(this.EXTENSION_ID),this.isBackgroundScript()&&this.extpay.startBackground(),this.initialized=!0,console.log("PaymentService initialized successfully")}catch(e){console.error("Failed to initialize PaymentService:",e)}}isBackgroundScript(){return"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.getManifest&&!chrome.tabs}async ensureInitialized(){if(this.initialized||await this.init(),!this.extpay)throw new Error("PaymentService not properly initialized")}async getUser(){await this.ensureInitialized();try{const e=await this.extpay.getUser();return{paid:e.paid||!1,paidAt:e.paidAt?new Date(e.paidAt):void 0,installedAt:new Date(e.installedAt),trialStartedAt:e.trialStartedAt?new Date(e.trialStartedAt):void 0,email:e.email,subscriptionStatus:e.subscriptionStatus}}catch(e){return console.error("Error getting user payment status:",e),{paid:!1,installedAt:new Date}}}async isPremiumUser(){const e=await this.getUser();return e.paid&&"active"===e.subscriptionStatus}async openPaymentPage(){await this.ensureInitialized();try{this.extpay.openPaymentPage()}catch(e){throw console.error("Error opening payment page:",e),new Error("Unable to open payment page")}}async getPlans(){await this.ensureInitialized();try{return(await this.extpay.getPlans()).map(e=>({id:e.id,title:e.title,description:e.description,price:e.price,currency:e.currency,interval:e.interval}))}catch(e){return console.error("Error getting payment plans:",e),[]}}onPaid(e){this.extpay?this.extpay.onPaid.addListener(t=>{const a={paid:t.paid||!1,paidAt:t.paidAt?new Date(t.paidAt):void 0,installedAt:new Date(t.installedAt),trialStartedAt:t.trialStartedAt?new Date(t.trialStartedAt):void 0,email:t.email,subscriptionStatus:t.subscriptionStatus};e(a)}):console.warn("ExtPay not initialized, payment listener not added")}async canUseFeature(e){const t=await this.isPremiumUser();return{gpt_modification:t,unlimited_saves:t,advanced_search:!0,custom_categories:t}[e]||!1}async getUsageLimits(){return await this.isPremiumUser()?{gptModifications:-1,savedPrompts:-1}:{gptModifications:3,savedPrompts:10}}async trackUsage(e){if(await this.isPremiumUser())return!0;const t=`usage_${e}_${(new Date).toDateString()}`;try{const a=(await chrome.storage.local.get([t]))[t]||0,i=await this.getUsageLimits();let r;return r="gpt_modification"===e?i.gptModifications:i.savedPrompts,!(a>=r)&&(await chrome.storage.local.set({[t]:a+1}),!0)}catch(e){return console.error("Error tracking usage:",e),!1}}async getRemainingUsage(e){if(await this.isPremiumUser())return-1;const t=`usage_${e}_${(new Date).toDateString()}`;try{const a=(await chrome.storage.local.get([t]))[t]||0,i=await this.getUsageLimits();let r;return r="gpt_modification"===e?i.gptModifications:i.savedPrompts,Math.max(0,r-a)}catch(e){return console.error("Error getting remaining usage:",e),0}}};class n{constructor(){this.apiKey=null,this.knowledgeBase=null,this.secureStorage=null,"undefined"!=typeof SecureStorage&&(this.secureStorage=new SecureStorage)}static getInstance(){return n.instance||(n.instance=new n),n.instance}async loadKnowledgeBase(){if(this.knowledgeBase)return this.knowledgeBase;try{const e=await fetch("/data/knowledge-base.json");return this.knowledgeBase=await e.json(),this.knowledgeBase}catch(e){return console.error("Failed to load knowledge base:",e),null}}generateSystemPrompt(e){return"You are an expert AI prompt engineer specializing in Google Veo 3. Transform ideas into prompts using the SSASA framework:\n\n1) SUBJECT: Clearly identify who/what is the focus with specific details (e.g., 'grizzled detective in rumpled trench coat' not 'a man')\n2) SCENE: Describe environment in detail - where and when action occurs (e.g., 'dusty attic with afternoon light through grimy window')\n3) ACTION: Define what subject is doing with strong verbs, chain actions with 'this happens, then that happens'\n4) STYLE: Specify visual aesthetic (e.g., '1990s VHS footage', '8-bit video game', 'claymation', 'filmed on 16mm')\n5) AUDIO: Explicitly describe all sounds - dialogue, ambient sounds, SFX, and music (Veo 3's signature feature)\n\nFor dialogue, use format: \"Character Name says (with emotional tone): 'Exact words.'\" - This prevents mixing up speakers.\n\nInclude negative prompt (no subtitles, no on-screen text) unless requested. Keep modifications concise and focused on the user's instruction while maintaining Veo 3 best practices."}async setApiKey(e){if(!e)return this.secureStorage?await this.secureStorage.removeApiKey():await chrome.storage.local.remove(["gptApiKey"]),void(this.apiKey=null);try{this.secureStorage?(await this.secureStorage.storeApiKey(e),this.apiKey=e):(this.apiKey=e,await chrome.storage.local.set({gptApiKey:e}))}catch(e){throw console.error("Failed to store API key:",e),e}}async getApiKey(){if(this.apiKey)return this.apiKey;try{if(this.secureStorage)return await this.secureStorage.migrateOldKey(),this.apiKey=await this.secureStorage.getApiKey(),this.apiKey;{const e=await chrome.storage.local.get(["gptApiKey"]);return this.apiKey=e.gptApiKey||null,this.apiKey}}catch(e){return console.error("Failed to retrieve API key:",e),this.apiKey=null,null}}async modifyPrompt(e){if(!await o.canUseFeature("gpt_modification"))throw new Error("💎 Premium Feature: AI prompt modification requires a Premium subscription. Upgrade to unlock unlimited modifications!");if(!await o.trackUsage("gpt_modification")&&0===await o.getRemainingUsage("gpt_modification"))throw new Error("⏰ Daily Limit Reached: You've used all your AI modifications for today. Upgrade to Premium for unlimited access!");const t=await this.getApiKey();if(!t)throw new Error("🔑 API key required: Please add your OpenAI API key in settings to use prompt modification features.");if(!e.instruction?.trim())throw new Error("📝 Modification instruction required: Please describe how you want to modify the prompt.");const a=await this.loadKnowledgeBase(),i=this.generateSystemPrompt(a);try{const a=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-4o",messages:[{role:"system",content:i},{role:"user",content:`Original prompt: "${e.prompt}"\n\nModification instruction: "${e.instruction}"\n\nPlease modify the prompt according to the instruction using the SSASA framework.`}],temperature:.7,max_tokens:800})});if(!a.ok){const e=await a.json().catch(()=>({})),t=e.error?.message;throw 401===a.status?new Error("🔐 Invalid API key: Please check your OpenAI API key in settings and ensure it's valid."):403===a.status?new Error("🚫 Access denied: Your API key doesn't have permission to access GPT-4. Please check your OpenAI account."):429===a.status?new Error("⏰ Rate limit exceeded: Please wait a moment and try again. Consider upgrading your OpenAI plan for higher limits."):500===a.status?new Error("🔧 OpenAI server error: Please try again in a few moments."):a.status>=400&&a.status<500?new Error(`❌ Request error: ${t||"Please check your request and try again."}`):new Error(`🌐 Network error: ${t||"Please check your internet connection and try again."}`)}const r=await a.json();if(!r.choices?.[0]?.message?.content)throw new Error("📭 Empty response: The AI didn't generate a response. Please try again with a different instruction.");return r.choices[0].message.content.trim()}catch(e){if(console.error("GPT API error:",e),e instanceof TypeError&&e.message.includes("fetch"))throw new Error("🌐 Connection failed: Please check your internet connection and try again.");throw e}}}const c=({onClose:e})=>{const[t,a]=(0,r.useState)(""),[s,o]=(0,r.useState)(!1),[c,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{n.getInstance().getApiKey().then(e=>{e&&a(e)})},[]),(0,i.jsx)("div",{className:"settings-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:(0,i.jsxs)("div",{className:"settings-modal",children:[(0,i.jsxs)("div",{className:"settings-header",children:[(0,i.jsx)("h2",{id:"settings-title",children:"Settings"}),(0,i.jsx)("button",{className:"close-button",onClick:e,"aria-label":"Close settings",children:"✕"})]}),(0,i.jsx)("div",{className:"settings-content",children:(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{htmlFor:"api-key",children:"OpenAI API Key"}),(0,i.jsxs)("div",{className:"api-key-input-group",children:[(0,i.jsx)("input",{id:"api-key",type:s?"text":"password",value:t,onChange:e=>a(e.target.value),placeholder:"sk-...",className:"api-key-input"}),(0,i.jsx)("button",{className:"toggle-visibility",onClick:()=>o(!s),"aria-label":s?"Hide API key":"Show API key",type:"button",children:s?"🙈":"👁️"})]}),(0,i.jsxs)("p",{className:"setting-help",children:["Get your API key from ",(0,i.jsx)("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",children:"OpenAI Dashboard"})]})]})}),(0,i.jsxs)("div",{className:"settings-footer",children:[(0,i.jsx)("button",{className:"secondary",onClick:e,children:"Cancel"}),(0,i.jsx)("button",{className:"primary",onClick:async()=>{try{if(await n.getInstance().setApiKey(t),t&&"undefined"!=typeof window&&window.tierService){const e=window.tierService;try{await e.upgradeToBYOK(t),console.log("User upgraded to BYOK tier")}catch(e){console.error("Failed to upgrade to BYOK tier:",e)}}else if(!t&&"undefined"!=typeof window&&window.tierService){const e=window.tierService;await e.setUserTier("free",null)}l(!0),setTimeout(()=>{l(!1),e()},1500)}catch(e){console.error("Failed to save API key:",e)}},children:c?"✓ Saved":"Save"})]})]})})},l=()=>{const[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1);(0,r.useEffect)(()=>{o()},[]);const o=async()=>{try{const e=await chrome.storage.local.get(["user"]);e.user&&t(e.user)}catch(e){console.error("Error checking auth status:",e)}};return a?(0,i.jsx)("div",{className:"google-auth",children:(0,i.jsx)("span",{className:"auth-loading",children:"Signing in..."})}):e?(0,i.jsxs)("div",{className:"google-auth signed-in",children:[e.picture&&(0,i.jsx)("img",{src:e.picture,alt:e.name||e.email,className:"user-avatar",referrerPolicy:"no-referrer"}),(0,i.jsxs)("div",{className:"user-info",children:[(0,i.jsx)("span",{className:"user-name",children:e.name||e.email}),(0,i.jsx)("button",{onClick:async()=>{try{chrome.identity.clearAllCachedAuthTokens(()=>{console.log("Signed out successfully")}),await chrome.storage.local.remove(["user"]),t(null)}catch(e){console.error("Sign out error:",e)}},className:"sign-out-btn",title:"Sign out",children:"Sign Out"})]})]}):(0,i.jsx)("div",{className:"google-auth",children:(0,i.jsxs)("button",{onClick:async()=>{s(!0);try{chrome.identity.getAuthToken({interactive:!0},async e=>{if(chrome.runtime.lastError||!e)return console.error("Sign in failed:",chrome.runtime.lastError),void s(!1);try{const a=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const e=await a.json(),i={email:e.email,name:e.name,picture:e.picture};await chrome.storage.local.set({user:i}),t(i)}}catch(e){console.error("Failed to get user info:",e)}s(!1)})}catch(e){console.error("Sign in error:",e),s(!1)}},className:"sign-in-btn",disabled:a,children:[(0,i.jsxs)("svg",{className:"google-icon",viewBox:"0 0 24 24",width:"18",height:"18",children:[(0,i.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,i.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,i.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,i.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})})},d=({searchQuery:e="",onSearch:t})=>{const[a,s]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await n.getInstance().getApiKey(),t=Boolean(e);d(t),t||m(!0)}catch(e){console.error("Failed to check API key status:",e),d(!1)}},h=()=>{s(!0),m(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("header",{className:"header",children:[(0,i.jsxs)("div",{className:"header-content",children:[(0,i.jsxs)("div",{className:"header-left",children:[(0,i.jsx)("img",{src:"/icons/icon32.svg",alt:"Veo 3 Logo",className:"header-logo"}),(0,i.jsx)("h1",{className:"header-title",children:"Veo 3 Prompt Assistant"})]}),(0,i.jsxs)("div",{className:"header-actions",children:[t&&(0,i.jsxs)("div",{className:"search-container",children:[(0,i.jsx)("input",{type:"text",className:"search-input",placeholder:"Search prompts...",value:e,onChange:e=>t(e.target.value),"aria-label":"Search prompts"}),(0,i.jsx)("span",{className:"search-icon","aria-hidden":"true",children:"🔍"})]}),(0,i.jsx)(l,{}),null!==o&&(0,i.jsx)("div",{className:"api-status",children:(0,i.jsx)("span",{className:"status-indicator "+(o?"connected":"disconnected"),title:o?"API key configured":"API key required",children:o?"🟢":"🔴"})}),(0,i.jsx)("button",{className:"icon-button",onClick:h,"aria-label":"Open settings",children:"⚙️"})]})]}),p&&!o&&(0,i.jsx)("div",{className:"onboarding-banner",children:(0,i.jsxs)("div",{className:"onboarding-content",children:[(0,i.jsx)("h3",{children:"🚀 Get Started!"}),(0,i.jsx)("p",{children:"Add your OpenAI API key to unlock prompt modification features."}),(0,i.jsx)("button",{className:"primary setup-button",onClick:h,children:"Setup API Key"})]})})]}),a&&(0,i.jsx)(c,{onClose:()=>{s(!1),m(!1),u()}})]})},p=[{id:"1",name:"ads",icon:"📺",description:"Commercial and advertising prompts",color:"#FF6B6B"},{id:"2",name:"storytelling",icon:"📖",description:"Narrative and story-driven content",color:"#4ECDC4"},{id:"3",name:"tutorial",icon:"🎓",description:"Educational and how-to content",color:"#45B7D1"},{id:"4",name:"vlogging",icon:"📹",description:"Personal vlog and lifestyle content",color:"#96CEB4"},{id:"5",name:"mobile-game",icon:"🎮",description:"Mobile game ads and gameplay",color:"#A8E6CF"},{id:"6",name:"street-interview",icon:"🎤",description:"Street interviews and social content",color:"#FF8B94"},{id:"7",name:"tech-influencer",icon:"💻",description:"Tech reviews and influencer content",color:"#B4A7D6"},{id:"8",name:"my-prompts",icon:"⭐",description:"Your saved and custom prompts",color:"#FECA57"}],m=({onCategorySelect:e})=>(0,i.jsx)("main",{className:"category-grid",role:"main","aria-label":"Prompt categories",children:p.map(t=>{const a=t.name.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(0,i.jsxs)("div",{className:"category-card",onClick:()=>e(t.name),onKeyDown:a=>((t,a)=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e(a))})(a,t.name),style:{borderColor:t.color},role:"button",tabIndex:0,"aria-label":`${a} category. ${t.description}`,children:[(0,i.jsx)("div",{className:"category-icon",style:{backgroundColor:t.color+"20"},"aria-hidden":"true",children:t.icon}),(0,i.jsx)("h3",{className:"category-name",children:a}),(0,i.jsx)("p",{className:"category-description",children:t.description}),(0,i.jsx)("span",{className:"category-count","aria-label":"Click to view prompts in this category",children:"View prompts"})]},t.id)})});var u=a(855);const h=({message:e})=>(0,i.jsx)("div",{className:"toast",role:"status","aria-live":"polite","aria-atomic":"true",children:e}),g=({feature:e,children:t,fallback:a,showUpgradePrompt:s=!0})=>{const[n,c]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!0),[p,m]=(0,r.useState)(-1);(0,r.useEffect)(()=>{u()},[e]);const u=async()=>{try{d(!0);const t=await o.canUseFeature(e);if(c(t),["gpt_modification","unlimited_saves"].includes(e)){const t=await o.getRemainingUsage("gpt_modification"===e?"gpt_modification":"saved_prompt");m(t)}}catch(e){console.error("Error checking feature access:",e),c(!1)}finally{d(!1)}},h=async()=>{try{await o.openPaymentPage()}catch(e){console.error("Error opening payment page:",e)}},g=e=>({gpt_modification:"AI Prompt Modification",unlimited_saves:"Unlimited Saved Prompts",advanced_search:"Advanced Search",custom_categories:"Custom Categories"}[e]||e);return l?(0,i.jsx)("div",{className:"payment-gate loading",children:(0,i.jsx)("div",{className:"loading-spinner"})}):n&&0===p&&["gpt_modification","unlimited_saves"].includes(e)?a?(0,i.jsx)(i.Fragment,{children:a}):(0,i.jsx)("div",{className:"payment-gate usage-limit",children:(0,i.jsxs)("div",{className:"gate-content",children:[(0,i.jsx)("div",{className:"gate-icon",children:"⚠️"}),(0,i.jsxs)("div",{className:"gate-text",children:[(0,i.jsx)("h3",{children:"Daily Limit Reached"}),(0,i.jsxs)("p",{children:["You've reached your daily limit for ",g(e).toLowerCase(),"."]}),(0,i.jsx)("p",{children:"Upgrade to Premium for unlimited access!"})]}),s&&(0,i.jsx)("button",{className:"upgrade-button",onClick:h,children:"Upgrade Now"})]})}):n?(0,i.jsx)(i.Fragment,{children:t}):a?(0,i.jsx)(i.Fragment,{children:a}):s?(0,i.jsx)("div",{className:"payment-gate premium-required",children:(0,i.jsxs)("div",{className:"gate-content",children:[(0,i.jsx)("div",{className:"gate-icon",children:"💎"}),(0,i.jsxs)("div",{className:"gate-text",children:[(0,i.jsx)("h3",{children:"Premium Feature"}),(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:g(e)})}),(0,i.jsx)("p",{children:(e=>({gpt_modification:"Modify prompts with AI assistance to perfectly match your vision",unlimited_saves:"Save unlimited prompts to your personal library",advanced_search:"Search with advanced filters and sorting options",custom_categories:"Create and organize your own prompt categories"}[e]||""))(e)})]}),(0,i.jsx)("button",{className:"upgrade-button",onClick:h,children:"Upgrade to Premium"})]})}):null},y=({prompt:e,onSave:t,isSaved:a})=>{const[s,c]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),[u,y]=(0,r.useState)(!1),[_,w]=(0,r.useState)(""),[f,b]=(0,r.useState)(e.prompt),[v,x]=(0,r.useState)(!1),j=e=>{m(e),d(!0),setTimeout(()=>d(!1),3e3)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"prompt-card",children:[(0,i.jsxs)("div",{className:"prompt-header",onClick:()=>c(!s),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),c(!s))},role:"button",tabIndex:0,"aria-expanded":s,"aria-controls":`prompt-content-${e.id}`,"aria-label":`${s?"Collapse":"Expand"} prompt: ${e.title}`,children:[(0,i.jsx)("h3",{className:"prompt-title",children:e.title}),(0,i.jsx)("span",{className:"expand-icon","aria-hidden":"true",children:s?"▼":"▶"})]}),s&&(0,i.jsxs)("div",{className:"prompt-content",id:`prompt-content-${e.id}`,role:"region","aria-label":"Prompt details",children:[(0,i.jsx)("p",{className:"prompt-text",children:f}),u?(0,i.jsxs)("div",{className:"modify-section",children:[(0,i.jsx)("textarea",{className:"modify-input",placeholder:"How would you like to modify this prompt? (e.g., 'make it more dramatic', 'add slow motion effects')",value:_,onChange:e=>w(e.target.value)}),(0,i.jsxs)("div",{className:"modify-actions",children:[(0,i.jsx)("button",{className:"secondary",onClick:()=>y(!1),disabled:v,children:"Cancel"}),(0,i.jsx)("button",{className:"primary",onClick:async()=>{if(_.trim()){x(!0);try{const e=n.getInstance(),t=await e.modifyPrompt({prompt:f,instruction:_});b(t),y(!1),w(""),j("✨ Prompt modified successfully!")}catch(e){console.error("Failed to modify prompt:",e);const t=e instanceof Error?e.message:"❌ Failed to modify prompt";j(t)}finally{x(!1)}}else j("📝 Please enter a modification instruction")},disabled:v||!_.trim(),"aria-label":v?"Modifying prompt, please wait":"Apply modification to prompt",children:v?"⏳ Modifying...":"✨ Apply"})]})]}):(0,i.jsxs)("div",{className:"prompt-actions",role:"group","aria-label":"Prompt actions",children:[(0,i.jsx)("button",{className:"action-button",onClick:async()=>{try{await navigator.clipboard.writeText(f),j("📋 Prompt copied to clipboard!")}catch(e){try{const e=document.createElement("textarea");e.value=f,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();const t=document.execCommand("copy");if(document.body.removeChild(e),!t)throw new Error("Copy command failed");j("📋 Prompt copied to clipboard!")}catch(e){console.error("Copy failed:",e),j("❌ Failed to copy: Please select and copy the text manually")}}},"aria-label":"Copy prompt to clipboard",children:"📋 Copy"}),(0,i.jsx)(g,{feature:"gpt_modification",fallback:(0,i.jsx)("button",{className:"action-button disabled",disabled:!0,"aria-label":"Modify prompt (Premium feature)",children:"✏️ Modify (Premium)"}),showUpgradePrompt:!1,children:(0,i.jsx)("button",{className:"action-button",onClick:()=>y(!0),"aria-label":"Modify this prompt using AI",children:"✏️ Modify"})}),(0,i.jsx)("button",{className:"action-button",onClick:()=>{e.youtubeLink?window.open(e.youtubeLink,"_blank"):j("🎬 Preview coming soon!")},"aria-label":"Preview example video",children:"▶️ Preview"}),t&&!a&&(0,i.jsx)("button",{className:"action-button",onClick:async()=>{t&&(await o.trackUsage("saved_prompt")||0!==await o.getRemainingUsage("saved_prompt")?(t(e),j("⭐ Prompt saved successfully!")):j("💎 Save Limit Reached: Upgrade to Premium for unlimited saved prompts!"))},"aria-label":"Save prompt to favorites",children:"⭐ Save"})]})]})]}),l&&(0,i.jsx)(h,{message:p})]})},_=({category:e,searchQuery:t="",onBack:a})=>{const[s,o]=(0,r.useState)([]),[n,c]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{d(!0);try{if("my-prompts"===e){const e=await chrome.storage.local.get(["savedPrompts"]);c(e.savedPrompts||[])}else if("all"===e){const e=await u.G.getPrompts();o(e)}else{const t=await u.G.getPromptsByCategory(e);o(t)}}catch(e){console.error("Failed to load prompts:",e)}d(!1)})()},[e]);const p=async e=>{const t={...e,id:`saved-${Date.now()}`,category:"my-prompts",isCustom:!0,dateAdded:(new Date).toISOString()},a=[...n,t];c(a),chrome.storage.local.set({savedPrompts:a})},m=(e=>{if(!t.trim())return e;const a=t.toLowerCase();return e.filter(e=>e.title.toLowerCase().includes(a)||e.prompt.toLowerCase().includes(a)||e.category.toLowerCase().includes(a))})("my-prompts"===e?n:s);return(0,i.jsxs)("div",{className:"prompt-list",children:[(0,i.jsxs)("div",{className:"prompt-list-header",children:[(0,i.jsx)("button",{className:"back-button",onClick:a,"aria-label":"Go back to categories",children:"← Back"}),(0,i.jsx)("h2",{className:"category-title",children:t.trim()?`Search Results (${m.length})`:e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")})]}),l?(0,i.jsx)("div",{className:"loading-state",children:(0,i.jsx)("p",{children:"Loading prompts..."})}):0===m.length?(0,i.jsx)("div",{className:"empty-state",children:(0,i.jsx)("p",{children:t.trim()?`No prompts found for "${t}". Try different keywords.`:"my-prompts"===e?"No saved prompts yet. Browse categories and save your favorites!":"No prompts available for this category."})}):(0,i.jsx)("div",{className:"prompts-grid",children:m.map(t=>(0,i.jsx)(y,{prompt:t,onSave:"my-prompts"!==e?p:void 0,isSaved:"my-prompts"===e},t.id))})]})},w=({onUpgradeClick:e,showDetailsButton:t=!0})=>{const[a,s]=(0,r.useState)(null),[n,c]=(0,r.useState)(!0),[l,d]=(0,r.useState)({gptModifications:0,savedPrompts:0});(0,r.useEffect)(()=>{p();const e=e=>{"PAYMENT_STATUS_CHANGED"===e.type&&(s(e.user),m())};return chrome.runtime.onMessage.addListener(e),()=>chrome.runtime.onMessage.removeListener(e)},[]);const p=async()=>{try{c(!0);const e=await o.getUser();s(e),await m()}catch(e){console.error("Error loading user data:",e)}finally{c(!1)}},m=async()=>{try{const[e,t]=await Promise.all([o.getRemainingUsage("gpt_modification"),o.getRemainingUsage("saved_prompt")]);d({gptModifications:e,savedPrompts:t})}catch(e){console.error("Error loading usage data:",e)}},u=async()=>{try{e?e():await o.openPaymentPage()}catch(e){console.error("Error opening payment page:",e)}};if(n)return(0,i.jsxs)("div",{className:"subscription-status loading",children:[(0,i.jsx)("div",{className:"status-indicator"}),(0,i.jsx)("span",{children:"Loading subscription..."})]});if(!a)return(0,i.jsxs)("div",{className:"subscription-status error",children:[(0,i.jsx)("div",{className:"status-indicator error"}),(0,i.jsx)("span",{children:"Unable to load subscription status"})]});const h=a.paid&&"active"===a.subscriptionStatus;return(0,i.jsxs)("div",{className:"subscription-status "+(h?"premium":"free"),children:[(0,i.jsxs)("div",{className:"status-header",children:[(0,i.jsx)("div",{className:"status-indicator "+(h?"premium":"free")}),(0,i.jsxs)("div",{className:"status-info",children:[(0,i.jsx)("span",{className:"status-label",children:h?"Premium":"Free"}),h&&a.subscriptionStatus&&(0,i.jsx)("span",{className:"subscription-details",children:"active"===a.subscriptionStatus?"Active":a.subscriptionStatus})]})]}),!h&&(0,i.jsxs)("div",{className:"usage-limits",children:[(0,i.jsxs)("div",{className:"usage-item",children:[(0,i.jsx)("span",{children:"AI Modifications:"}),(0,i.jsxs)("span",{className:0===l.gptModifications?"limit-reached":"",children:[-1===l.gptModifications?"∞":l.gptModifications," left today"]})]}),(0,i.jsxs)("div",{className:"usage-item",children:[(0,i.jsx)("span",{children:"Saved Prompts:"}),(0,i.jsxs)("span",{className:0===l.savedPrompts?"limit-reached":"",children:[-1===l.savedPrompts?"∞":l.savedPrompts," remaining"]})]})]}),(0,i.jsxs)("div",{className:"status-actions",children:[!h&&(0,i.jsx)("button",{className:"upgrade-button",onClick:u,children:"Upgrade to Premium"}),t&&(0,i.jsx)("button",{className:"details-button",onClick:u,children:h?"Manage Subscription":"View Plans"})]}),h&&a.paidAt&&(0,i.jsxs)("div",{className:"premium-since",children:["Premium since ",a.paidAt.toLocaleDateString()]})]})};s.createRoot(document.getElementById("root")).render((0,i.jsx)(r.StrictMode,{children:(0,i.jsx)(()=>{const[e,t]=(0,r.useState)({activeCategory:null,view:"browse"}),[a,s]=(0,r.useState)("");return(0,i.jsxs)("div",{className:"app",children:[(0,i.jsx)(d,{searchQuery:a,onSearch:a=>{s(a),a.trim()?t(e=>({...e,activeCategory:"all",view:"search"})):"search"===e.view&&t({activeCategory:null,view:"browse"})}}),(0,i.jsx)(w,{showDetailsButton:!1}),(0,i.jsx)("main",{className:"app-content",children:e.activeCategory?(0,i.jsx)(_,{category:e.activeCategory,searchQuery:a,onBack:()=>{t({activeCategory:null,view:"browse"}),s("")}}):(0,i.jsx)(m,{onCategorySelect:e=>{t(t=>({...t,activeCategory:e,view:"my-prompts"===e?"my-prompts":"browse"})),s("")}})})]})},{})}))},855:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>promptDataService});var _firebaseService__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(313);class PromptDataService{constructor(){this.prompts=[],this.loaded=!1,this.unsubscribe=null}async initialize(){if(await _firebaseService__WEBPACK_IMPORTED_MODULE_0__.J.isFirebaseEnabled()){const e=await this.loadFromFirebase();if(e.length>0)return e}const e=await this.loadFromAdminDashboard();return e.length>0?e:this.loadFromPromptsFile()}async loadFromFirebase(){try{return await _firebaseService__WEBPACK_IMPORTED_MODULE_0__.J.initialize(),new Promise(e=>{_firebaseService__WEBPACK_IMPORTED_MODULE_0__.J.subscribeToPrompts(t=>{this.prompts=t.map((e,t)=>({id:e.id||`firebase-${t+1}`,category:e.category,title:e.title,prompt:e.prompt,youtubeLink:e.youtubeLink,dateAdded:e.dateAdded||(new Date).toISOString(),isCustom:!1})),this.loaded=!0,console.log(`Loaded ${this.prompts.length} prompts from Firebase`),e(this.prompts)})})}catch(e){return console.warn("Failed to load from Firebase:",e),[]}}async loadFromAdminDashboard(){try{const response=await fetch("/admin-dashboard/prompts-data.js"),scriptText=await response.text(),match=scriptText.match(/const\s+parsedPrompts\s*=\s*(\[[\s\S]*?\]);/);if(match&&match[1]){const promptsData=eval(match[1]);return console.log(`Loaded ${promptsData.length} prompts from admin dashboard`),this.prompts=promptsData.map((e,t)=>({id:`prompt-${t+1}`,category:e.category,title:e.title,prompt:e.prompt,youtubeLink:e.youtubeLink,dateAdded:(new Date).toISOString(),isCustom:!1})),this.loaded=!0,this.prompts}}catch(e){console.warn("Failed to load admin dashboard prompts:",e)}return this.loadFromPromptsFile()}async loadFromPromptsFile(){try{const e=await fetch("/data/prompts.txt"),t=(await e.text()).split("\n").filter(e=>e.trim()&&!e.startsWith("#"));return this.prompts=t.map((e,t)=>{const[a,i,r,s]=e.split("|").map(e=>e.trim());return{id:`prompt-${t+1}`,category:a,title:i,prompt:r,youtubeLink:s||void 0,dateAdded:(new Date).toISOString(),isCustom:!1}}).filter(e=>e.title&&e.prompt),console.log(`Loaded ${this.prompts.length} prompts from prompts.txt`),this.loaded=!0,this.prompts}catch(e){return console.error("Failed to load prompts:",e),this.getDefaultPrompts()}}async getPrompts(){return this.loaded||await this.initialize(),this.prompts}async getPromptsByCategory(e){const t=await this.getPrompts();return"all"===e?t:"my-prompts"===e?(await chrome.storage.local.get(["savedPrompts"])).savedPrompts||[]:t.filter(t=>t.category===e)}async searchPrompts(e){const t=await this.getPrompts(),a=e.toLowerCase();return t.filter(e=>e.title.toLowerCase().includes(a)||e.prompt.toLowerCase().includes(a)||e.category.toLowerCase().includes(a))}getDefaultPrompts(){return[{id:"default-1",category:"ads",title:"Product Launch Teaser",prompt:"Create a 30-second teaser video for a new tech product launch.",dateAdded:(new Date).toISOString(),isCustom:!1},{id:"default-2",category:"storytelling",title:"Mystery Opening",prompt:"Create an opening scene for a mystery short film.",dateAdded:(new Date).toISOString(),isCustom:!1},{id:"default-3",category:"tutorial",title:"Cooking Tutorial",prompt:"Film a cooking tutorial with overhead shots.",dateAdded:(new Date).toISOString(),isCustom:!1},{id:"default-4",category:"vlogging",title:"Day in My Life",prompt:'Film a "day in my life" vlog.',dateAdded:(new Date).toISOString(),isCustom:!1}]}async reload(){return this.loaded=!1,this.prompts=[],this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.initialize()}cleanup(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),_firebaseService__WEBPACK_IMPORTED_MODULE_0__.J.unsubscribeFromPrompts()}}const promptDataService=new PromptDataService;var __WEBPACK_DEFAULT_EXPORT__=promptDataService}},__webpack_module_cache__={},deferred;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,a,i)=>{if(!t){var r=1/0;for(c=0;c<deferred.length;c++){for(var[t,a,i]=deferred[c],s=!0,o=0;o<t.length;o++)(!1&i||r>=i)&&Object.keys(__webpack_require__.O).every(e=>__webpack_require__.O[e](t[o]))?t.splice(o--,1):(s=!1,i<r&&(r=i));if(s){deferred.splice(c--,1);var n=a();void 0!==n&&(e=n)}}return e}i=i||0;for(var c=deferred.length;c>0&&deferred[c-1][2]>i;c--)deferred[c]=deferred[c-1];deferred[c]=[t,a,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.e=()=>Promise.resolve(),__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.j=887,(()=>{var e={887:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var i,r,[s,o,n]=a,c=0;if(s.some(t=>0!==e[t])){for(i in o)__webpack_require__.o(o,i)&&(__webpack_require__.m[i]=o[i]);if(n)var l=n(__webpack_require__)}for(t&&t(a);c<s.length;c++)r=s[c],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(l)},a=self.webpackChunkveo_3_prompt_assistant=self.webpackChunkveo_3_prompt_assistant||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var __webpack_exports__=__webpack_require__.O(void 0,[121],()=>__webpack_require__(845));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();